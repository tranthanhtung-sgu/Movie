(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{56:function(e,t,i){},57:function(e,t,i){},87:function(e,t,i){},89:function(e,t,i){},90:function(e,t,i){},94:function(e,t,i){"use strict";i.r(t),i.d(t,"history",(function(){return Z}));var n=i(0),a=i(24),c=i.n(a),r=(i(56),i(57),i(3)),s=i(27),o=i(14),l=i(96),h=i(97),j=i(44),d=i.n(j),u=i(22),b=function e(t,i){Object(u.a)(this,e),this.data=void 0,this.pagination=void 0,this.data=t,this.pagination=i},m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;Object(u.a)(this,e),this.pageNumber=void 0,this.pageSize=void 0,this.pageNumber=t,this.pageSize=i},p=i(19),f=i.n(p),v=i(23),O=i(45),g=i(5),x=i(20),y=i.n(x),N=function(e){return new Promise((function(t){setTimeout(t,e)}))};y.a.defaults.baseURL="/api",y.a.interceptors.response.use(function(){var e=Object(v.a)(f.a.mark((function e(t){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(0);case 2:if(!(i=t.headers.pagination)){e.next=6;break}return t.data=new b(t.data,JSON.parse(i)),e.abrupt("return",t);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var w=function(e){return e.data},_=function(e){return y.a.get(e).then(w)},P={Movies:{list:function(e){return y.a.get("/movie",{params:e}).then(w)},detail:function(e){return _("/movie/".concat(e))},listAll:function(){return _("/movie/all")}}},k={movieStore:new(function(){function e(){var t=this;Object(u.a)(this,e),this.movieRegistry=new Map,this.selectedMovie=void 0,this.loading=!1,this.loadingInitial=!0,this.pagination=null,this.pagingParams=new m,this.predicate=(new Map).set("category","all"),this.setPagingParams=function(e){t.pagingParams=e},this.setPredicate=function(e,i){switch(e){case"category":t.predicate.delete("title"),t.predicate.delete("category"),t.predicate.set("category",i);break;case"title":t.predicate.delete("title"),t.predicate.delete("category"),t.predicate.set("title",i)}},this.setPagination=function(e){t.pagination=e},this.loadMovies=Object(v.a)(f.a.mark((function e(){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInitial=!0,e.prev=1,e.next=4,P.Movies.list(t.axiosParams);case 4:i=e.sent,Object(g.h)((function(){i.data.forEach((function(e){t.setMovie(e)})),t.setPagination(i.pagination),t.loadingInitial=!1})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(g.h)((function(){t.loadingInitial=!1}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),this.loadMovie=function(){var e=Object(v.a)(f.a.mark((function e(i){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.getMovie(i))){e.next=6;break}return t.selectedMovie=n,e.abrupt("return",n);case 6:return t.loadingInitial=!0,e.prev=7,e.next=10,P.Movies.detail(i);case 10:return n=e.sent,t.setMovie(n),Object(g.h)((function(){t.selectedMovie=n,t.loadingInitial=!1})),e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0),Object(g.h)((function(){t.loadingInitial=!1}));case 20:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}(),this.clearSelectedMovie=function(){t.selectedMovie=void 0},Object(g.d)(this),Object(g.g)((function(){return t.predicate.keys()}),(function(){t.pagingParams=new m,t.movieRegistry.clear(),t.loadMovies()}))}return Object(O.a)(e,[{key:"moviesArray",get:function(){return Array.from(this.movieRegistry.values())}},{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("pageNumber",this.pagingParams.pageNumber.toString()),e.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((function(t,i){e.append(i,t)})),e}},{key:"getMovie",value:function(e){return this.movieRegistry.get(e)}},{key:"setMovie",value:function(e){this.movieRegistry.set(e.id,e)}}]),e}())},S=Object(n.createContext)(k);function M(){return Object(n.useContext)(S)}var I,T=i(46),C=i(32),z=i(47),R=i.n(z),A=i(1),U=Object(C.css)(I||(I=Object(T.a)(['\n  display: block;\n  margin: 0 auto;\n  border-color: "yellow";\n'])));function E(e){e.content,e.inverted;return Object(A.jsx)(R.a,{css:U,color:"#f1b722"})}var B=i(50);function F(){var e=M().movieStore,t=e.setPredicate,i=e.loadMovies;return Object(A.jsx)("div",{className:"filter__container",children:Object(A.jsx)("div",{className:"filter__bar",children:Object(A.jsx)(B.a,{initialValues:{search:""},onSubmit:function(e,n){var a;n.setSubmitting;a=e.search,t("title",a),i().then((function(){}))},children:function(e){var t=e.values,i=e.isSubmitting,n=e.handleBlur,a=e.handleChange,c=e.handleSubmit;return Object(A.jsxs)("form",{className:"filter__form",onSubmit:c,autoComplete:"off",children:[Object(A.jsx)("input",{className:"filter__input",placeholder:"T\xecm ki\u1ebfm",type:"text",name:"search",onChange:a,onBlur:n,value:t.search}),Object(A.jsx)("button",{className:"filter__btn",type:"submit",disabled:i,children:"T\xecm"})]})}})})})}i(87);var J=i(95),L=i(98),D=i(21);var V=Object(o.a)((function(e){var t,i=e.movie;return Object(A.jsxs)("div",{className:"movie-item",children:[Object(A.jsx)(D.a,{style:{textDecoration:"none"},to:"phim bo"===i.category?"/phim/".concat(i.id,"/chap/1"):"/phim/".concat(i.id,"/chap/0"),children:Object(A.jsx)("img",{className:"movie-item__img",alt:"img",src:i.image})}),Object(A.jsx)(D.a,{style:{textDecoration:"none"},to:"/phim/".concat(i.id),children:Object(A.jsx)("div",{className:"movie-item__title",children:(t=i.title,t.length>40?t.substring(0,35)+"...":t)})})]})})),Y=Object(o.a)((function(){var e=M().movieStore,t=e.moviesArray,i=e.pagination;return Object(A.jsxs)(J.a,{children:[Object(A.jsxs)(l.a,{className:"row-filter",children:[Object(A.jsx)(h.a,{xl:6,children:Object(A.jsx)("h1",{className:"title",children:"Phim m\u1edbi"})}),Object(A.jsxs)(h.a,{xl:6,className:"m-auto",children:[Object(A.jsxs)(L.a,{variant:"light ml-2 btn-filter-film active",children:["T\u1ea5t c\u1ea3 phim (",i.totalItems,")"]}),Object(A.jsx)(L.a,{variant:"dark ml-2 btn-filter-film",children:"S\u1eafp chi\u1ebfu"}),Object(A.jsx)(L.a,{variant:"dark ml-2 btn-filter-film",children:"Phim m\u1edbi"})]})]}),Object(A.jsx)(l.a,{className:"cards-film mt-3",children:t.map((function(e){return Object(A.jsx)(h.a,{md:3,children:Object(A.jsx)(V,{movie:e})},e.id)}))})]})})),q=Object(o.a)((function(){var e=M().movieStore,t=e.movieRegistry,i=e.loadMovies,a=e.loadingInitial,c=e.setPagingParams,r=e.pagination,o=Object(n.useState)(!1),j=Object(s.a)(o,2),u=j[0],b=j[1];return console.log(r),console.log(t.size),Object(n.useEffect)((function(){console.log(123),t.size<=1&&i()}),[t.size,i]),a&&!u||null===r?null:Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)(F,{}),Object(A.jsxs)(l.a,{className:"",children:[Object(A.jsxs)(h.a,{xs:9,className:"left-side",children:[Object(A.jsx)(d.a,{pageStart:0,loadMore:function(){b(!0),c(new m(r.currentPage+1)),i().then((function(){return b(!1)}))},hasMore:!u&&!!r&&r.currentPage<r.totalPages,initialLoad:!1,children:Object(A.jsx)(Y,{})}),Object(A.jsx)("div",{style:{textAlign:"center",color:"#fff",fontSize:50,marginTop:-10,display:r.currentPage===r.totalPages?"none":"block"},children:Object(A.jsx)(E,{})})]}),Object(A.jsx)(h.a,{xs:3,className:"hint-1",children:"3 of 3"})]})]})})),G=(i(89),Object(o.a)((function(){var e=M().movieStore,t=e.setPredicate,i=e.loadMovies,n=e.predicate;function a(e){t("category",e),i().then((function(){})),Z.push("/")}function c(e){if(n.has("category"))return e===n.get("category")}return Object(A.jsxs)("nav",{children:[Object(A.jsx)("input",{id:"nav-toggle",type:"checkbox"}),Object(A.jsx)(D.a,{to:"/",children:Object(A.jsxs)("div",{onClick:function(){return a("all")},className:"logo",children:["Thanh ",Object(A.jsx)("strong",{children:"\u205fT\xf9ng"})]})}),Object(A.jsxs)("ul",{className:"links",children:[Object(A.jsx)("li",{children:Object(A.jsx)("a",{style:{color:c("phim bo")?"#f1b722":"#fff"},onClick:function(){return a("phim bo")},children:"Phim b\u1ed9"})}),Object(A.jsx)("li",{children:Object(A.jsx)("a",{style:{color:c("phim rap")?"#f1b722":"#fff"},onClick:function(){return a("phim rap")},children:"Phim chi\u1ebfu r\u1ea1p"})}),Object(A.jsx)("li",{children:Object(A.jsx)("a",{href:"#phimviet",children:"Phim Vi\u1ec7t Nam"})}),Object(A.jsx)("li",{children:Object(A.jsx)("a",{style:{color:c("phim le")?"#f1b722":"#fff"},onClick:function(){return a("phim le")},children:"Phim l\u1ebb"})}),Object(A.jsx)("li",{children:Object(A.jsx)("a",{href:"#phimhoathinh",children:"Phim ho\u1ea1t h\xecnh"})})]}),Object(A.jsxs)("label",{htmlFor:"nav-toggle",className:"icon-burger",children:[Object(A.jsx)("div",{className:"line"}),Object(A.jsx)("div",{className:"line"}),Object(A.jsx)("div",{className:"line"})]})]})}))),H=i(51),K=(i(90),Object(o.a)((function(e){var t=e.chapUrl,i=Object(r.e)().chap,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],h=c[1];return Object(n.useEffect)((function(){var e=t.find((function(e){return e.chap===parseInt(i)}));return"0"!==i&&void 0!==e||h(t[0].url),e&&0!==e.chap&&h(e.url),function(){}}),[h,t,i]),Object(A.jsx)(l.a,{children:Object(A.jsx)("div",{className:"iframe__container",style:{width:"100%",height:0,position:"relative",paddingBottom:"56.250%",marginTop:40},children:Object(A.jsx)("iframe",{allow:"autoplay",src:"".concat(o),style:{width:"100%",height:"100%",position:"absolute",left:0,top:0,overflow:"hidden"},frameBorder:0,allowFullScreen:!0})})})}))),Q=Object(o.a)((function(){var e=M().movieStore,t=e.loadMovie,i=e.clearSelectedMovie,a=e.selectedMovie,c=Object(r.e)().id,s=Object(r.f)().url;return Object(n.useEffect)((function(){return c&&t(c),window.scrollTo(0,0),function(){i()}}),[c,t,i]),a?Object(A.jsxs)(J.a,{className:"",children:[Object(A.jsxs)(l.a,{className:"header-content-block  ",children:[Object(A.jsx)(h.a,{lg:5,children:Object(A.jsx)("div",{className:"movie__image",style:{backgroundImage:"url(".concat(a.image,")")}})}),Object(A.jsxs)(h.a,{lg:7,children:[Object(A.jsx)("h1",{className:"title__movie",children:a.title}),Object(A.jsxs)("div",{className:"info-wrapper",children:[Object(A.jsxs)("div",{className:"preview__film",children:[Object(A.jsxs)("div",{className:"time",children:[Object(A.jsx)("h6",{className:"preview__label",children:"Th\u1eddi l\u01b0\u1ee3ng:"}),Object(A.jsx)("h6",{className:"preview__content",children:a.time})]}),Object(A.jsxs)("div",{className:"director",children:[Object(A.jsx)("h6",{className:"preview__label",children:"\u0110\u1ea1o di\u1ec5n:"}),Object(A.jsx)("h6",{className:"preview__content",children:a.director})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("i",{style:{color:"yellow"},className:"far fa-clock"})," ",a.publishYear]})]}),Object(A.jsx)("div",{className:"review__film",children:Object(A.jsx)("p",{children:a.description})})]})]})]}),Object(A.jsx)("div",{style:{width:"100%",textAlign:"center",marginTop:30},children:0!==a.chapUrl.length?a.chapUrl.map((function(e,t){return Object(A.jsx)("div",{style:{display:"inline-flex",textAlign:"center"},children:Object(A.jsx)(D.a,{to:"".concat(s,"/chap/").concat(t+1),children:Object(A.jsx)("button",{className:"btn btn-light m-2",children:t+1})})},t)})):""}),Object(A.jsx)(H.a,{children:Object(A.jsx)(r.a,{exact:!0,path:"".concat(s,"/chap/:chap"),children:Object(A.jsx)(K,{chapUrl:a.chapUrl})})}),Object(A.jsx)("div",{className:"fb-comments","data-href":window.location.href,"data-width":"700","data-numposts":"5"})]}):null}));var W=function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(G,{}),Object(A.jsx)(r.a,{exact:!0,path:"/",component:q}),Object(A.jsx)(r.a,{path:"/(.+)",render:function(){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(r.a,{path:"/phim/:id",component:Q})})}})]})},X=i(9),Z=(i(93),Object(X.a)());c.a.render(Object(A.jsx)(S.Provider,{value:k,children:Object(A.jsx)(r.b,{history:Z,children:Object(A.jsx)(W,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.a371c1d3.chunk.js.map