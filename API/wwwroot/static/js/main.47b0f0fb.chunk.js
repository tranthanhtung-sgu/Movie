(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{44:function(e,t,i){},45:function(e,t,i){},68:function(e,t,i){},72:function(e,t,i){},73:function(e,t,i){},77:function(e,t,i){"use strict";i.r(t),i.d(t,"history",(function(){return V}));var n=i(0),a=i(19),c=i.n(a),r=(i(44),i(45),i(3)),s=i(20),o=i(12),l=i(79),h=i(80),j=i(36),d=i.n(j),u=i(17),b=function e(t,i){Object(u.a)(this,e),this.data=void 0,this.pagination=void 0,this.data=t,this.pagination=i},m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;Object(u.a)(this,e),this.pageNumber=void 0,this.pageSize=void 0,this.pageNumber=t,this.pageSize=i},p=i(14),v=i.n(p),O=i(18),f=i(37),g=i(5),x=i(15),N=i.n(x),y=function(e){return new Promise((function(t){setTimeout(t,e)}))};N.a.defaults.baseURL="/api",N.a.interceptors.response.use(function(){var e=Object(O.a)(v.a.mark((function e(t){var i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(500);case 2:if(!(i=t.headers.pagination)){e.next=6;break}return t.data=new b(t.data,JSON.parse(i)),e.abrupt("return",t);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var w=function(e){return e.data},P=function(e){return N.a.get(e).then(w)},k={Movies:{list:function(e){return N.a.get("/movie",{params:e}).then(w)},detail:function(e){return P("/movie/".concat(e))}}},M={movieStore:new(function(){function e(){var t=this;Object(u.a)(this,e),this.movieRegistry=new Map,this.selectedMovie=void 0,this.loading=!1,this.loadingInitial=!0,this.pagination=null,this.pagingParams=new m,this.predicate=(new Map).set("category","all"),this.setPagingParams=function(e){t.pagingParams=e},this.setPredicate=function(e,i){switch(e){case"category":t.predicate.delete("category"),t.predicate.set("category",i)}},this.setPagination=function(e){t.pagination=e},this.loadMovies=Object(O.a)(v.a.mark((function e(){var i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInitial=!0,e.prev=1,e.next=4,k.Movies.list(t.axiosParams);case 4:i=e.sent,Object(g.h)((function(){i.data.forEach((function(e){t.setMovie(e)})),t.setPagination(i.pagination),t.loadingInitial=!1})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(g.h)((function(){t.loadingInitial=!1}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),this.loadMovie=function(){var e=Object(O.a)(v.a.mark((function e(i){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.getMovie(i))){e.next=6;break}return t.selectedMovie=n,e.abrupt("return",n);case 6:return t.loadingInitial=!0,e.prev=7,e.next=10,k.Movies.detail(i);case 10:return n=e.sent,t.setMovie(n),Object(g.h)((function(){t.selectedMovie=n,t.loadingInitial=!1})),e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0),Object(g.h)((function(){t.loadingInitial=!1}));case 20:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}(),this.clearSelectedMovie=function(){t.selectedMovie=void 0},Object(g.d)(this),Object(g.g)((function(){return t.predicate.keys()}),(function(){t.pagingParams=new m,t.movieRegistry.clear(),t.loadMovies()}))}return Object(f.a)(e,[{key:"moviesArray",get:function(){return Array.from(this.movieRegistry.values())}},{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("pageNumber",this.pagingParams.pageNumber.toString()),e.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((function(t,i){e.append(i,t)})),e}},{key:"getMovie",value:function(e){return this.movieRegistry.get(e)}},{key:"setMovie",value:function(e){this.movieRegistry.set(e.id,e)}}]),e}())},_=Object(n.createContext)(M);function S(){return Object(n.useContext)(_)}i(68);var I=i(78),R=i(81),z=i(16),C=i(1);var T=Object(o.a)((function(e){var t,i=e.movie;return Object(C.jsxs)("div",{className:"movie-item",children:[Object(C.jsx)(z.a,{style:{textDecoration:"none"},to:"phim bo"===i.category?"/phim/".concat(i.id,"/chap/1"):"/phim/".concat(i.id,"/chap/0"),children:Object(C.jsx)("img",{className:"movie-item__img",alt:"img",src:i.image})}),Object(C.jsx)(z.a,{style:{textDecoration:"none"},to:"/phim/".concat(i.id),children:Object(C.jsx)("div",{className:"movie-item__title",children:(t=i.title,t.length>40?t.substring(0,35)+"...":t)})})]})})),U=Object(o.a)((function(){var e=S().movieStore,t=e.moviesArray,i=e.pagination;return Object(C.jsxs)(I.a,{children:[Object(C.jsxs)(l.a,{className:"row-filter",children:[Object(C.jsx)(h.a,{xl:6,children:Object(C.jsx)("h1",{className:"title",children:"Phim m\u1edbi"})}),Object(C.jsxs)(h.a,{xl:6,className:"m-auto",children:[Object(C.jsxs)(R.a,{variant:"light ml-2 btn-filter-film active",children:["T\u1ea5t c\u1ea3 phim (",i.totalItems,")"]}),Object(C.jsx)(R.a,{variant:"dark ml-2 btn-filter-film",children:"S\u1eafp chi\u1ebfu"}),Object(C.jsx)(R.a,{variant:"dark ml-2 btn-filter-film",children:"Phim m\u1edbi"})]})]}),Object(C.jsx)(l.a,{className:"cards-film mt-3",children:t.map((function(e){return Object(C.jsx)(h.a,{md:3,children:Object(C.jsx)(T,{movie:e})},e.id)}))})]})})),A=Object(o.a)((function(){var e=S().movieStore,t=e.movieRegistry,i=e.loadMovies,a=e.loadingInitial,c=e.setPagingParams,r=e.pagination,o=Object(n.useState)(!1),j=Object(s.a)(o,2),u=j[0],b=j[1];return Object(n.useEffect)((function(){t.size<=1&&i()}),[t.size,i]),a&&!u?null:Object(C.jsx)("div",{className:"container",children:Object(C.jsxs)(l.a,{className:"",children:[Object(C.jsxs)(h.a,{xs:9,className:"left-side",children:[Object(C.jsx)(d.a,{pageStart:0,loadMore:function(){b(!0),c(new m(r.currentPage+1)),i().then((function(){return b(!1)}))},hasMore:!u&&!!r&&r.currentPage<r.totalPages,initialLoad:!1,children:Object(C.jsx)(U,{})}),Object(C.jsx)("div",{style:{textAlign:"center",color:"#fff",fontSize:50,marginTop:-10,display:r.currentPage===r.totalPages?"none":"block"},children:"Continue..."})]}),Object(C.jsx)(h.a,{xs:3,className:"hint-1",children:"3 of 3"})]})})})),E=(i(72),Object(o.a)((function(){var e=S().movieStore,t=e.setPredicate,i=e.loadMovies;function n(e){t("category",e),i().then((function(){})),V.push("/")}return Object(C.jsxs)("nav",{children:[Object(C.jsx)("input",{id:"nav-toggle",type:"checkbox"}),Object(C.jsx)(z.a,{to:"/",children:Object(C.jsxs)("div",{onClick:function(){return n("all")},className:"logo",children:["Phim c\u1ee7a ",Object(C.jsx)("strong",{children:"\u205fNh\u1ecf"})]})}),Object(C.jsxs)("ul",{className:"links",children:[Object(C.jsx)("li",{children:Object(C.jsx)("a",{onClick:function(){return n("phim bo")},children:"Phim b\u1ed9"})}),Object(C.jsx)("li",{children:Object(C.jsx)("a",{onClick:function(){return n("phim rap")},children:"Phim chi\u1ebfu r\u1ea1p"})}),Object(C.jsx)("li",{children:Object(C.jsx)("a",{href:"#phimviet",children:"Phim Vi\u1ec7t Nam"})}),Object(C.jsx)("li",{children:Object(C.jsx)("a",{onClick:function(){return n("phim le")},children:"Phim l\u1ebb"})}),Object(C.jsx)("li",{children:Object(C.jsx)("a",{href:"#phimhoathinh",children:"Phim ho\u1ea1t h\xecnh"})})]}),Object(C.jsxs)("label",{htmlFor:"nav-toggle",className:"icon-burger",children:[Object(C.jsx)("div",{className:"line"}),Object(C.jsx)("div",{className:"line"}),Object(C.jsx)("div",{className:"line"})]})]})}))),F=i(39),B=(i(73),Object(o.a)((function(e){var t=e.chapUrl,i=Object(r.f)(),a=i.path,c=i.url,o=Object(r.e)().chap;console.log(a),console.log(c);var h=Object(n.useState)(""),j=Object(s.a)(h,2),d=j[0],u=j[1];return Object(n.useEffect)((function(){var e=t.find((function(e){return e.chap===parseInt(o)}));return"0"!==o&&void 0!==e||u(t[0].url),e&&0!==e.chap&&u(e.url),function(){}}),[u,t,o]),Object(C.jsx)(l.a,{children:Object(C.jsx)("div",{className:"iframe__container",style:{width:"100%",height:0,position:"relative",paddingBottom:"56.250%",marginTop:40},children:Object(C.jsx)("iframe",{allow:"autoplay",src:"".concat(d),style:{width:"100%",height:"100%",position:"absolute",left:0,top:0,overflow:"hidden"},frameBorder:0,allowFullScreen:!0})})})}))),J=Object(o.a)((function(){var e=S().movieStore,t=e.loadMovie,i=e.clearSelectedMovie,a=e.selectedMovie,c=Object(r.e)().id,s=Object(r.f)().url;return Object(n.useEffect)((function(){return c&&t(c),window.scrollTo(0,0),function(){return i()}}),[c,t,i]),a?Object(C.jsxs)(I.a,{className:"",children:[Object(C.jsxs)(l.a,{className:"header-content-block  ",children:[Object(C.jsx)(h.a,{lg:5,children:Object(C.jsx)("div",{className:"movie__image",style:{backgroundImage:"url(".concat(a.image,")")}})}),Object(C.jsxs)(h.a,{lg:7,children:[Object(C.jsx)("h1",{className:"title__movie",children:a.title}),Object(C.jsxs)("div",{className:"info-wrapper",children:[Object(C.jsxs)("div",{className:"preview__film",children:[Object(C.jsxs)("div",{className:"time",children:[Object(C.jsx)("h6",{className:"preview__label",children:"Th\u1eddi l\u01b0\u1ee3ng:"}),Object(C.jsx)("h6",{className:"preview__content",children:a.time})]}),Object(C.jsxs)("div",{className:"director",children:[Object(C.jsx)("h6",{className:"preview__label",children:"\u0110\u1ea1o di\u1ec5n:"}),Object(C.jsx)("h6",{className:"preview__content",children:a.director})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("i",{style:{color:"yellow"},className:"far fa-clock"})," ",a.publishYear]})]}),Object(C.jsx)("div",{className:"review__film",children:Object(C.jsx)("p",{children:a.description})})]})]})]}),Object(C.jsx)("div",{style:{width:"100%",textAlign:"center",marginTop:30},children:0!==a.chapUrl.length?a.chapUrl.map((function(e,t){return Object(C.jsx)("div",{style:{display:"inline-flex",textAlign:"center"},children:Object(C.jsx)(z.a,{to:"".concat(s,"/chap/").concat(t+1),children:Object(C.jsx)("button",{className:"btn btn-light m-2",children:t+1})})},t)})):""}),Object(C.jsx)(F.a,{children:Object(C.jsx)(r.a,{exact:!0,path:"".concat(s,"/chap/:chap"),children:Object(C.jsx)(B,{chapUrl:a.chapUrl})})})]}):null}));var L=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(E,{}),Object(C.jsx)(r.a,{exact:!0,path:"/",component:A}),Object(C.jsx)(r.a,{path:"/(.+)",render:function(){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(r.a,{path:"/phim/:id",component:J})})}})]})},D=i(8),V=(i(76),Object(D.a)());c.a.render(Object(C.jsx)(_.Provider,{value:M,children:Object(C.jsx)(r.b,{history:V,children:Object(C.jsx)(L,{})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.47b0f0fb.chunk.js.map